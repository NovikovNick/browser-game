[{"/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/index.js":"1","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/App.js":"2","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/container/Board.js":"3","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/store/reducers/index.js":"4","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/component/Player.js":"5","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/store/ActionTypes.js":"6","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/store/ReduxActions.js":"7","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/container/WebSocket.js":"8","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/store/reducers/players.js":"9","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/container/Controls.js":"10","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/service/service.js":"11","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/config.js":"12","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/component/PlayerMouse.js":"13"},{"size":198,"mtime":1609956792533,"results":"14","hashOfConfig":"15"},{"size":2962,"mtime":1610103840943,"results":"16","hashOfConfig":"15"},{"size":1532,"mtime":1610103831975,"results":"17","hashOfConfig":"15"},{"size":45,"mtime":1609929310065,"results":"18","hashOfConfig":"15"},{"size":2075,"mtime":1610033859956,"results":"19","hashOfConfig":"15"},{"size":206,"mtime":1610019869300,"results":"20","hashOfConfig":"15"},{"size":676,"mtime":1610020936590,"results":"21","hashOfConfig":"15"},{"size":3151,"mtime":1610051594338,"results":"22","hashOfConfig":"15"},{"size":1231,"mtime":1610114098917,"results":"23","hashOfConfig":"15"},{"size":2424,"mtime":1610020202833,"results":"24","hashOfConfig":"15"},{"size":1885,"mtime":1610010644983,"results":"25","hashOfConfig":"15"},{"size":85,"mtime":1609963658799,"results":"26","hashOfConfig":"15"},{"size":454,"mtime":1610032422544,"results":"27","hashOfConfig":"15"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"1lgwz23",{"filePath":"31","messages":"32","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33","usedDeprecatedRules":"30"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36","usedDeprecatedRules":"30"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47","usedDeprecatedRules":"30"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/index.js",[],["59","60"],"/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/App.js",["61"],"import React from 'react';\nimport {applyMiddleware, combineReducers, createStore} from 'redux';\nimport {Provider} from 'react-redux';\nimport thunk from 'redux-thunk';\n\nimport * as reducers from './store/reducers';\n// Importing Sass with Bootstrap CSS\nimport './App.scss';\n\nimport Board from \"./container/Board\";\nimport WebSocket from \"./container/WebSocket\";\nimport * as actions from \"./store/ReduxActions\";\nimport {Container} from \"react-bootstrap\";\nimport Controls from \"./container/Controls\";\n\n\nconst store = createStore(combineReducers(reducers), applyMiddleware(thunk));\n// window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());\n\nlet timerId = setTimeout(function tick() {\n\n    const snapshots = store.getState().state.snapshots;\n\n    if (snapshots) {\n        const fst = snapshots[0]\n        const snd = snapshots[1]\n        if (fst && snd && fst.players && snd.players) {\n\n            const fstGroupedById = fst.players.reduce((r, a) => {\n                r[a.sessionId] = a;\n                return r;\n            }, {});\n\n            const sndGroupedById = snd.players.reduce((r, a) => {\n                r[a.sessionId] = a;\n                return r;\n            }, {});\n\n            const frame = fst.timestamp - snd.timestamp;\n            const timestamp = new Date().getTime();\n            const delay = timestamp - fst.timestamp;\n            const mod = frame < delay ? 1 : delay / frame;\n\n            const players = [];\n            for (const [sessionId, value] of Object.entries(fstGroupedById)) {\n                if (sndGroupedById[sessionId]) {\n                    const p1 = value\n                    const p2 = sndGroupedById[sessionId]\n                    const player = {\n                        id: sessionId,\n                        username: p1.username,\n                        x: p2.mousePosX + (p1.mousePosX - p2.mousePosX) * mod,\n                        y: p2.mousePosY + (p1.mousePosY - p2.mousePosY) * mod,\n                        characterPosX: p2.characterPosX + (p1.characterPosX - p2.characterPosX) * mod,\n                        characterPosY: p2.characterPosY + (p1.characterPosY - p2.characterPosY) * mod,\n                    };\n                    players.push(player);\n                }\n            }\n            store.dispatch(actions.updateState(players));\n        }\n    }\n\n    timerId = setTimeout(tick, 15);\n}, 15);\n\nfunction App() {\n    return (\n        <Provider store={store}>\n\n            <WebSocket host={\"http://192.168.0.103:8080\"}/>\n            <Board/>\n\n            <Container className=\"p-3\">\n                <div className=\"row\">\n                    <nav className=\"offset-md-10 col-md-2 d-none d-md-block bg-light sidebar\">\n                        <Controls/>\n                    </nav>\n\n                    <main role=\"main\" className=\"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4\"></main>\n\n                </div>\n            </Container>\n        </Provider>\n    );\n}\n\nexport default App;\n","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/container/Board.js",["62"],"import React from 'react';\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\n\nimport * as Store from \"../store/ReduxActions\";\n\nimport PlayerMouse from \"../component/PlayerMouse\";\nimport Player from \"../component/Player\";\n\nfunction Board({players}) {\n\n    players = players || [];\n\n    const verticalLines = [];\n    const horizontalLines = [];\n\n    const width = 2000;\n    const height = 2000\n\n    {\n        const n = 40;\n        for (var i = 1; i < n; i++) {\n            const y = (height / n) * i;\n            const x = (width / n) * i;\n\n            const color = i % 2 != 0 ? \"#eee\" : \"#888\";\n\n            verticalLines.push(<line key={i} x1=\"0\" y1={y} x2=\"2000\" y2={y} stroke={color}/>);\n            horizontalLines.push(<line key={i} x1={x} y1=\"0\" x2={x} y2=\"2000\" stroke={color}/>);\n        }\n    }\n    return (\n        <svg version=\"1.1\"\n             baseProfile=\"full\"\n             xmlns=\"http://www.w3.org/2000/svg\">\n\n            {verticalLines}\n            {horizontalLines}\n\n            <Player x={600}\n                    y={100}/>\n\n            {players.map((item, i) => <PlayerMouse key={i}\n                                                   x={item.x}\n                                                   y={item.y}\n                                                   name={item.username}\n                                                   color={\"red\"}/>)}\n        </svg>\n    );\n}\n\nconst mapStateToProps = state => ({\n    players: state.state.players\n});\nconst mapDispatchToProps = dispatch => ({\n    actions: bindActionCreators(Store, dispatch)\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(Board);\n","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/store/reducers/index.js",[],"/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/component/Player.js",[],"/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/store/ActionTypes.js",[],"/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/store/ReduxActions.js",[],"/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/container/WebSocket.js",["63","64","65"],"import {Client} from \"@stomp/stompjs\";\nimport * as SockJS from 'sockjs-client';\n\nimport React, {useEffect} from 'react';\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\n\nimport * as Store from \"../store/ReduxActions\";\n\nconst inputState = {\n    mousePosX: 0,\n    mousePosY: 0,\n    isPressedW: false,\n    isPressedA: false,\n    isPressedS: false,\n    isPressedD: false\n}\n\nfunction onKeyPress(e) {\n    switch (e.keyCode) {\n        case 119:\n            inputState.isPressedW = true;\n            break;\n        case 97:\n            inputState.isPressedA = true;\n            break;\n        case 100:\n            inputState.isPressedD = true;\n            break;\n        case 115:\n            inputState.isPressedS = true;\n            break;\n    }\n};\n\nfunction onKeyUp(e) {\n\n    switch (e.keyCode) {\n        case 87:\n            inputState.isPressedW = false;\n            break;\n        case 65:\n            inputState.isPressedA = false;\n            break;\n        case 68:\n            inputState.isPressedD = false;\n            break;\n        case 83:\n            inputState.isPressedS = false;\n            break;\n    }\n};\n\nfunction onMouseUpdate(e) {\n    inputState.mousePosX = e.pageX;\n    inputState.mousePosY = e.pageY;\n}\n\nconst ENDPOINT = {\n    APP_NAME: \"/game\",\n    TOPIC_PLAYER_LIST: '/backend/player/list',\n    TOPIC_PLAYER_UPDATE: '/frontend/update'\n};\n\nconst webSocket = new Client();\n\nfunction WebSocket({host, actions}) {\n\n    useEffect(() => {\n        webSocket.configure({\n            webSocketFactory: () => new SockJS(host + ENDPOINT.APP_NAME),\n            onConnect: (frame) => {\n\n                var url = webSocket.webSocket._transport.url;\n                url = url.split(\"/\");\n                var sessionId = url[url.length - 2];\n                webSocket.sessionId = sessionId;\n\n                actions.updateSessionId(sessionId)\n                actions.changePlayerName({sessionId: sessionId})\n\n                webSocket.subscribe(ENDPOINT.TOPIC_PLAYER_LIST, message => {\n                    const state = JSON.parse(message.body);\n                    actions.addSnapshot(state);\n                });\n\n                let timerId = setTimeout(function tick() {\n\n                    webSocket.publish({\n                        destination: ENDPOINT.TOPIC_PLAYER_UPDATE,\n                        body: JSON.stringify(inputState)\n                    });\n                    timerId = setTimeout(tick, 40); // (*)\n                }, 40);\n            },\n            onWebSocketError: e => console.error(\"Chat service is unavailable\", e),\n            // debug: str => console.log(new Date(), str)\n        });\n        webSocket.activate();\n\n        document.addEventListener('mousemove', onMouseUpdate, false);\n        document.addEventListener('mouseenter', onMouseUpdate, false);\n        document.addEventListener('keypress', onKeyPress, false);\n        document.addEventListener('keyup', onKeyUp, false);\n    })\n\n    return (\n        <div/>\n    );\n}\n\nconst mapDispatchToProps = dispatch => ({\n    actions: bindActionCreators(Store, dispatch)\n});\nexport default connect(null, mapDispatchToProps)(WebSocket);\n","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/store/reducers/players.js",[],"/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/container/Controls.js",[],"/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/service/service.js",[],"/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/config.js",[],["66","67"],"/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/component/PlayerMouse.js",[],{"ruleId":"68","replacedBy":"69"},{"ruleId":"70","replacedBy":"71"},{"ruleId":"72","severity":1,"message":"73","line":64,"column":5,"nodeType":"74","messageId":"75","endLine":64,"endColumn":12},{"ruleId":"76","severity":1,"message":"77","line":26,"column":33,"nodeType":"78","messageId":"79","endLine":26,"endColumn":35},{"ruleId":"80","severity":1,"message":"81","line":20,"column":5,"nodeType":"82","messageId":"83","endLine":33,"endColumn":6},{"ruleId":"80","severity":1,"message":"81","line":38,"column":5,"nodeType":"82","messageId":"83","endLine":51,"endColumn":6},{"ruleId":"72","severity":1,"message":"73","line":93,"column":21,"nodeType":"74","messageId":"75","endLine":93,"endColumn":28},{"ruleId":"68","replacedBy":"84"},{"ruleId":"70","replacedBy":"85"},"no-native-reassign",["86"],"no-negated-in-lhs",["87"],"no-unused-vars","'timerId' is assigned a value but never used.","Identifier","unusedVar","eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected","default-case","Expected a default case.","SwitchStatement","missingDefaultCase",["86"],["87"],"no-global-assign","no-unsafe-negation"]