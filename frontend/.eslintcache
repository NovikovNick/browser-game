[{"/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/index.js":"1","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/App.js":"2","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/container/Board.js":"3","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/store/reducers/index.js":"4","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/component/Player.js":"5","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/store/ActionTypes.js":"6","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/store/ReduxActions.js":"7","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/container/WebSocket.js":"8","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/store/reducers/players.js":"9","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/container/Controls.js":"10","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/service/service.js":"11","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/config.js":"12","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/component/PlayerMouse.js":"13"},{"size":198,"mtime":1609956792533,"results":"14","hashOfConfig":"15"},{"size":4783,"mtime":1610486487460,"results":"16","hashOfConfig":"15"},{"size":3619,"mtime":1610484749012,"results":"17","hashOfConfig":"15"},{"size":45,"mtime":1609929310065,"results":"18","hashOfConfig":"15"},{"size":3754,"mtime":1610385312249,"results":"19","hashOfConfig":"15"},{"size":206,"mtime":1610019869300,"results":"20","hashOfConfig":"15"},{"size":765,"mtime":1610476668471,"results":"21","hashOfConfig":"15"},{"size":3587,"mtime":1610474498886,"results":"22","hashOfConfig":"15"},{"size":2101,"mtime":1610476542279,"results":"23","hashOfConfig":"15"},{"size":2434,"mtime":1610221866980,"results":"24","hashOfConfig":"15"},{"size":1885,"mtime":1610010644983,"results":"25","hashOfConfig":"15"},{"size":85,"mtime":1609963658799,"results":"26","hashOfConfig":"15"},{"size":454,"mtime":1610032422544,"results":"27","hashOfConfig":"15"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"1lgwz23",{"filePath":"31","messages":"32","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"33","messages":"34","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"35","usedDeprecatedRules":"30"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"46","usedDeprecatedRules":"30"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/index.js",[],["57","58"],"/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/App.js",["59"],"/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/container/Board.js",["60"],"import React from 'react';\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\n\nimport * as Store from \"../store/ReduxActions\";\nimport Player from \"../component/Player\";\n\nfunction Grid({width, height, n}) {\n    const grid = [];\n    for (var i = 1; i < n; i++) {\n\n        const y = (height / n) * i;\n        const x = (width / n) * i;\n        const color = i % 2 != 0 ? \"#eee\" : \"#888\";\n\n        grid.push(<line key={\"v\" + i} x1=\"0\" y1={y} x2={width}  y2={y}      stroke={color}/>);\n        grid.push(<line key={\"h\" + i} x1={x} y1=\"0\" x2={x}      y2={height} stroke={color}/>);\n    }\n    return grid;\n}\n\nfunction random() {\n    const min = Math.ceil(0);\n    const max = Math.floor(800);\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\nconst p1 = [random(), random()]\nconst p2 = [random(), random()]\nconst p3 = [random(), random()]\nconst p4 = [random(), random()]\n\nfunction Line({p1, p2, color}) {\n    return <g>\n        <line stroke={color}\n              x1={p1[0]} x2={p2[0]}\n              y1={p1[1]} y2={p2[1]}/>\n        <circle cx={p1[0]} cy={p1[1]} r={5} fill={color}/>\n        <circle cx={p2[0]} cy={p2[1]} r={5} fill={color}/>\n    </g>;\n}\n\n/**\n * determinant for matrix [\n *   [a, c],\n *   [b, d]\n * ]\n * @param matrix [2][2]\n * @returns {number}\n */\nfunction det(matrix) {\n    const a = matrix[0][0], b = matrix[1][0], c = matrix[0][1], d = matrix[1][1];\n    return a * d - b * c;\n}\n\nfunction intersect(p1, p2, p3, p4) {\n\n    const x1 = p1[0], x2 = p2[0], x3 = p3[0], x4 = p4[0];\n    const y1 = p1[1], y2 = p2[1], y3 = p3[1], y4 = p4[1];\n\n    const uNumerator = det([\n        [x4 - x2, x4 - x3],\n        [y4 - y2, y4 - y3]\n    ])\n    const vNumerator = det([\n        [x1 - x2, x4 - x2],\n        [y1 - y2, y4 - y2]\n    ]);\n    const denominator = det([\n        [x1 - x2, x4 - x3],\n        [y1 - y2, y4 - y3]\n    ]);\n    const u = uNumerator / denominator;\n    const v = vNumerator / denominator;\n    return {\n        intersect: u > 0 && u < 1 && v > 0 && v < 1,\n        point: [u * (x1 - x2) + x2, u * (y1 - y2) + y2]\n    };\n}\nconst intersected = intersect(p1, p2, p3, p4);\nconsole.log(p1, p2, p3, p4, intersected)\n\nfunction Board({character, enemies, projectiles}) {\n\n    projectiles = projectiles || []\n\n    const bullets = [];\n    for (let i = 0; i < projectiles.length; i++) {\n\n        if (!projectiles[i].gameObject) {\n            continue;\n        }\n\n        const points = projectiles[i].gameObject.rigidBody.transformed.points || [];\n        for (let j = 0; j < points.length; j++) {\n            bullets.push(<circle key={\"b\" + i + \"_\" + j} cx={points[j].d0} cy={points[j].d1} r=\"5\" fill={\"yellow\"}/>)\n        }\n    }\n\n    return (\n        <svg version=\"1.1\"\n             baseProfile=\"full\"\n             xmlns=\"http://www.w3.org/2000/svg\">\n\n            <Grid width={2000} height={2000} n={40}/>\n\n            <Line p1={p1} p2={p2} color={\"red\"}/>\n            <Line p1={p3} p2={p4} color={\"red\"}/>\n\n            {intersected.intersect && <circle cx={intersected.point[0]} cy={intersected.point[1]} r={5} fill={\"blue\"}/>}\n\n            <Player character={character} isEnemy={false} color={\"blue\"}/>\n            {enemies.map((item, i) => <Player key={i} character={item} isEnemy={true} color={\"red\"}/>)}\n\n            {bullets}\n\n        </svg>\n    );\n}\n\nconst mapStateToProps = state => ({\n    character: state.state.character,\n    enemies: state.state.enemies,\n    projectiles: state.state.projectiles\n});\nconst mapDispatchToProps = dispatch => ({\n    actions: bindActionCreators(Store, dispatch)\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(Board);\n","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/store/reducers/index.js",[],"/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/component/Player.js",[],"/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/store/ActionTypes.js",[],"/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/store/ReduxActions.js",[],"/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/container/WebSocket.js",["61","62","63","64"],"import {Client} from \"@stomp/stompjs\";\nimport * as SockJS from 'sockjs-client';\n\nimport React, {useEffect} from 'react';\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\n\nimport * as Store from \"../store/ReduxActions\";\n\nconst inputState = {\n    leftBtnClicked: false,\n    rightBtnClicked: false,\n    mousePosX: 0,\n    mousePosY: 0,\n    isPressedW: false,\n    isPressedA: false,\n    isPressedS: false,\n    isPressedD: false\n}\n\nfunction onKeyPress(e) {\n    switch (e.keyCode) {\n        case 119:\n            inputState.isPressedW = true;\n            break;\n        case 97:\n            inputState.isPressedA = true;\n            break;\n        case 100:\n            inputState.isPressedD = true;\n            break;\n        case 115:\n            inputState.isPressedS = true;\n            break;\n    }\n};\n\nfunction onKeyUp(e) {\n\n    switch (e.keyCode) {\n        case 87:\n            inputState.isPressedW = false;\n            break;\n        case 65:\n            inputState.isPressedA = false;\n            break;\n        case 68:\n            inputState.isPressedD = false;\n            break;\n        case 83:\n            inputState.isPressedS = false;\n            break;\n    }\n};\n\nfunction onMouseUpdate(e) {\n\n    switch (e.which) {\n        case 1:\n            inputState.leftBtnClicked = true;\n            break;\n        case 3:\n            inputState.rightBtnClicked = true;\n            break;\n    }\n\n    inputState.mousePosX = e.pageX;\n    inputState.mousePosY = e.pageY;\n}\n\nconst ENDPOINT = {\n    APP_NAME: \"/game\",\n    TOPIC_PLAYER_LIST: \"/secured/user/queue/specific-user-user\",\n    TOPIC_PLAYER_UPDATE: '/frontend/update'\n};\n\nconst webSocket = new Client();\n\nfunction WebSocket({host, actions}) {\n\n    useEffect(() => {\n        webSocket.configure({\n            webSocketFactory: () => new SockJS(host + ENDPOINT.APP_NAME),\n            onConnect: (frame) => {\n\n                var url = webSocket.webSocket._transport.url;\n                url = url.split(\"/\");\n                var sessionId = url[url.length - 2];\n                webSocket.sessionId = sessionId;\n\n                actions.updateSessionId(sessionId)\n                actions.changePlayerName({sessionId: sessionId})\n\n                webSocket.subscribe(ENDPOINT.TOPIC_PLAYER_LIST + sessionId, message => {\n                    const state = JSON.parse(message.body);\n                    actions.addSnapshot(state);\n                });\n\n                let timerId = setTimeout(function tick() {\n\n                    webSocket.publish({\n                        destination: ENDPOINT.TOPIC_PLAYER_UPDATE,\n                        body: JSON.stringify(inputState)\n                    });\n\n                    inputState.leftBtnClicked =  inputState.rightBtnClicked = false;\n\n                    timerId = setTimeout(tick, 40); // (*)\n                }, 40);\n            },\n            onWebSocketError: e => console.error(\"Chat service is unavailable\", e),\n            // debug: str => console.log(new Date(), str)\n        });\n        webSocket.activate();\n\n        document.addEventListener('mousedown', onMouseUpdate, false);\n        document.addEventListener('mousemove', onMouseUpdate, false);\n        document.addEventListener('mouseenter', onMouseUpdate, false);\n        document.addEventListener('keypress', onKeyPress, false);\n        document.addEventListener('keyup', onKeyUp, false);\n    })\n\n    return (\n        <div/>\n    );\n}\n\nconst mapDispatchToProps = dispatch => ({\n    actions: bindActionCreators(Store, dispatch)\n});\nexport default connect(null, mapDispatchToProps)(WebSocket);\n","/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/store/reducers/players.js",[],"/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/container/Controls.js",[],"/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/service/service.js",[],"/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/config.js",[],"/home/nicknovikov/WORKSPACE/small-test-server/frontend/src/component/PlayerMouse.js",[],{"ruleId":"65","replacedBy":"66"},{"ruleId":"67","replacedBy":"68"},{"ruleId":"69","severity":1,"message":"70","line":134,"column":5,"nodeType":"71","messageId":"72","endLine":134,"endColumn":12},{"ruleId":"73","severity":1,"message":"74","line":14,"column":29,"nodeType":"75","messageId":"76","endLine":14,"endColumn":31},{"ruleId":"77","severity":1,"message":"78","line":22,"column":5,"nodeType":"79","messageId":"80","endLine":35,"endColumn":6},{"ruleId":"77","severity":1,"message":"78","line":40,"column":5,"nodeType":"79","messageId":"80","endLine":53,"endColumn":6},{"ruleId":"77","severity":1,"message":"78","line":58,"column":5,"nodeType":"79","messageId":"80","endLine":65,"endColumn":6},{"ruleId":"69","severity":1,"message":"70","line":108,"column":21,"nodeType":"71","messageId":"72","endLine":108,"endColumn":28},"no-native-reassign",["81"],"no-negated-in-lhs",["82"],"no-unused-vars","'timerId' is assigned a value but never used.","Identifier","unusedVar","eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected","default-case","Expected a default case.","SwitchStatement","missingDefaultCase","no-global-assign","no-unsafe-negation"]